<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jup Community Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/progressbar.js/1.1.0/progressbar.min.js"
        integrity="sha512-EZhmSl/hiKyEHklogkakFnSYa5mWsLmTC4ZfvVzhqYNLPbXKAXsjUYRf2O9OlzQN33H0xBVfGSEIUeqt9astHQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/granim@2.0.0/dist/granim.min.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/@tsparticles/preset-stars@3/tsparticles.preset.stars.bundle.min.js"></script>
    <link rel="icon" href="jlogo.avif" type="image/icon type">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Syne:wght@400..800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.css">


    <style>
        body {
            font-family: "Syne", sans-serif;
            font-optical-sizing: auto;
            font-style: normal;
        }

        .simple-keyboard.myTheme1 {
            background-color: #2ED3B7;
            border-radius: 10px;
            border-bottom-right-radius: 5px;
            border-bottom-left-radius: 5px;
            border-color: #00ffc4;
        }

        .simple-keyboard.myTheme1 .hg-button {
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #30302e;
            color: white;
        }

        .simple-keyboard.myTheme1 .hg-button:active {
            background: #00ffc4;
            color: white;
        }

        #root .simple-keyboard.myTheme1+.simple-keyboard-preview {
            background: #1c4995;
        }
    </style>

</head>

<body class="p-4 sm:p-1" style="background-image: url(images/Higher\ wide\ size.jpg); background-size: cover;">

    <div id="main" class="animate__animated animate__bounce sm:w-1/4 h-1/4 mt-1 place-self-center">
        <h1 id="iteration" class="text-white text-center text-2xl"></h1>
        <div id="imageElement" class="grid grid-cols-2 gap-1 sm:gap-0 grid-rows-2 mb-4">

        </div>
        <div class="text-center place-items-center flex flex-col">
            <input type="text" class="input rounded-md w-2/3 h-12 pl-[5%] text-lg font-bold mb-3 mt-2">
        </div>
        <div class="simple-keyboard w-2/3 mt-3"></div>
    </div>


    <div id="results-container"
        class="hidden animate__animated animate__bounce text-white w-fit h-screen flex items-center justify-center text-center z-50 leading-9 opacity-85 flex justify-center items-center justify-self-center">

        <div class="sm:p-8 p-4">
            <div id="results" class="p-2 relative mt-auto sm:px-24 sm:py-6 bg-white text-black rounded-lg shadow">
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/index.js"></script>
    <script>
        const Keyboard = window.SimpleKeyboard.default;

        let userGuess = document.querySelector('.input');
        let resetInput = false;
        let iteration = document.getElementById('iteration');

        const myKeyboard = new Keyboard({
            onChange: input => onChange(input),
            onKeyPress: button => onKeyPress(button),
            layout: {
                'default': [
                    'q w e r t y u i o p',
                    'a s d f g h j k l',
                    'z x c v b n m {bksp}',
                    '{space} {enter}'
                ]
            },
            display: {
                '{bksp}': '<',
                '{enter}': 'enter',
                '{space}': 'space',
            },
            theme: "hg-theme-default myTheme1"
        });

        function onChange(input) {
            userGuess.value = input
            console.log("Input changed", input);
        }

        function onKeyPress(button) {
            if (button == '{enter}') {
                console.log("Button pressed", button);
                checkGuess();
            }
        }

        let score = 0;

        const enter = myKeyboard.getButtonElement('{enter}')

        function checkGuess() {
            const guess = userGuess.value.toLowerCase();
            const correctAnswer = correctAnswers[currentIteration - 1].toLowerCase();

            if (guess == correctAnswer) {
                score += 1;
            }
            console.log(score)

            userGuess.value = ''
            myKeyboard.clearInput();
            displayNext();
        }

        function displayScore() {
            document.getElementById('main').classList.add('hidden');
            const resultContainer = document.getElementById('results-container');
            resultContainer.classList.remove('hidden');

            const result = document.getElementById('results');
            result.innerHTML = `<h3 class="font-extrabold text-4xl ">Jupiverse 4 Pics 1 Word</h3>
                <h4 class="p-4 text-xl">You got <span class="font-extrabold">${score}</span> questions correctly</h4>`;


        }


        let imagesArray = [
            [
                'trump.jpg',
                'cat4.jpg',
                'jupiverse.jpg',
                'ebglish.jpg'
            ],

            [
                'catstanbul1.jpg',
                'catstanbul2.jpg',
                'catstanbul3.jpg',
                'catstanbul4.jpg'
            ],

            [
                '1burningcat.jpg',
                '2burningcat.jpg',
                '3burningcat.jpg',
                '4burningcat.jpg'
            ],
            [
                'memecoin1.jpg',
                'memecoin2.jpg',
                'memecoin3.jpg',
                'memecoin4.jpg'
            ],
            [
                '1community.jpg',
                '2community.jpg',
                '3community.jpg',
                '4community.jpg'
            ],
            [
                'community1.jpg',
                'community2.jpg',
                'community3.jpg',
                'community4.jpg'
            ],
            [
                'satchel1.jpg',
                'satchel2.jpg',
                'satchel3.jpg',
                'satchel4.jpg'
            ],
            [
                'Yastin1.jpg',
                'Yastin2.jpg',
                'Yastin3.jpg',
                'Yastin4.jpg'
            ],
            [
                'JupRally1.jpg',
                'JupRally2.jpg',
                'JupRally3.jpg',
                'JupRally4.jpg'
            ],
            [
                'Jupuary1.jpg',
                'Jupuary2.jpg',
                'Jupuary3.jpg',
                'Jupuary4.jpg'
            ],
            [
                'ApePro1.jpg',
                'ApePro2.jpg',
                'ApePro3.jpg',
                'ApePro4.jpg'
            ],
            [
                'JupJam1.jpg',
                'JupJam2.jpg',
                'JupJam3.jpg',
                'JupJam4.jpg'
            ],
            [
                'JupLock1.jpg',
                'JupLock2.jpg',
                'JupLock3.jpg',
                'JupLock4.jpg'
            ],


        ]

        const correctAnswers = ['meow', 'catstanbul', 'burning cat', 'memecoin', 'community', 'working group', 'satchel',
                                'yastin bieber', 'jup rally', 'jupuary', 'ape pro', 'DefiJupJam', 'jup lock'];

        const imageElement = document.getElementById('imageElement');
        let currentIteration = 0;

        function displayNext() {
            if (currentIteration == imagesArray.length) {
                displayScore();
                return
            }
            imageElement.innerHTML = '';

            // Get the next set of images
            const nextImages = imagesArray[currentIteration];

            // Create and append new images
            nextImages.forEach(imageUrl => {
                const image = document.createElement('img');
                image.classList.add('sm:max-w-full', 'rounded-lg', 'place-self-end', 'sm:h-[95%]');
                image.src = 'images/' + imageUrl;
                image.alt = 'Image description';

                imageElement.appendChild(image);
            });

            currentIteration++;
            iteration.innerText = currentIteration
        }

        displayNext();
    </script>
</body>

</html>